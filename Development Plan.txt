你是一个资深全栈工程师。

请基于以下产品设计文档，为「卡秀 kaxiu.vip」
开发前后端分离系统：

后端：
- Go + Gin + GORM + MySQL
前端：
- H5
- Vue v3.5.26 最新稳定版
- TailwindCSS

严格遵守：
1. 卡片详情必须完整展示文档中列出的字段
2. 核销码只能在用户到店时动态生成
3. 预约/排队是可选功能
4. 排队进度只能通过服务完成确认推进
5. 不实现支付、不实现复杂权限

【以下是产品设计文档】
《卡秀 · kaxiu.vip》
小商户通用卡片 & 预约排队管理平台

产品设计文档（PRD · AI 可执行版 V3）

一、产品基本信息
1. 产品名称

卡秀（KaXiu）

2. 产品域名

kaxiu.vip

3. 产品定位（一句话）

卡秀 是一款面向 小型线下服务商户 的通用数字卡片管理工具，帮助用户清晰掌控自己的充值卡与使用情况，同时让商户以极低成本实现核销、通知及（可选）预约/排队透明化。

二、产品背景 & 核心问题
商户侧痛点

大量小商户无系统（理发、洗车、澡堂、送水、课程等）

次数卡/充值卡依靠人工或纸质记录

用户频繁询问：

还有几次？

现在忙不忙？

什么时候去合适？

不同服务场景 不一定都有预约/排队

用户侧痛点

卡内余额 / 次数是黑盒

忘记上次什么时候用过

不知道是否需要排队

商家通知触达率低

三、产品核心原则（写给 AI 的约束）

卡片信息必须对用户透明

核销必须由商户触发

预约/排队是可选能力，不强制

排队进度必须基于“服务完成确认”推进

不实现支付、不做复杂权限

四、用户角色定义
用户（C 端）

查看自己的卡片详情

到店时生成核销码

（可选）发起预约

确认服务完成

商户（B 端）

创建卡片

扫码核销

发布通知

确认预约 / 服务完成

五、MVP 功能范围（严格约束）
✅ 必须实现

卡片管理（次数卡）

到店生成核销码

使用记录

商家通知

可选预约 / 排队状态展示

服务完成确认机制

❌ 明确不做

支付 / 退款

财务对账

多门店

会员等级

复杂权限系统

六、核心功能模块设计
模块一：卡片管理（核心模块）
用户端功能
卡片列表

商户名称

卡类型

剩余次数

状态（正常 / 即将到期 / 已过期）

⭐ 卡片详情（重点）

卡片详情页 必须展示以下信息：

信息项	说明
商户名称
卡类型
开卡 / 充值时间	首次创建或最近一次充值
充值金额	仅展示，不做支付
总次数
已使用次数
剩余次数
上次使用时间	无则显示“未使用”
有效期
商家通知列表	最近 N 条
核销码展示

仅在用户到店、主动点击时生成

非长期静态二维码

有有效期（如 5 分钟）

商户端功能

创建卡片（绑定用户）

查看用户卡片（只读）

模块二：核销（扫码扣次数）
核销流程

用户到店 → 打开卡片 → 点击「生成核销码」

商户扫码

服务端校验：

是否在有效期内

剩余次数是否足够

扣减次数

生成使用记录

核销规则

剩余次数不足 → 禁止核销

卡已过期 → 禁止核销

每次核销必须生成 usage 记录

模块三：使用记录
用户端

查看所有使用记录

包含：

使用时间

使用次数

商户名称

商户端

查看今日核销记录

模块四：商家通知
商户端

发布通知：

标题

内容

用户端

在卡片详情中查看该商户的通知

⭐ 模块五：预约 / 排队（可选模块）

⚠️ 不是所有服务必须支持预约/排队

适用场景

理发

洗车

课程

需要等待的服务

非适用场景

直接到店即服务

无等待队列的服务

1️⃣ 预约流程

用户向商户发起预约（时间）

商户确认预约

预约进入排队队列

2️⃣ 服务完成确认机制（关键）

排队进度 不依赖时间推移，而依赖“服务完成确认”

服务完成确认方式（二选一）

用户确认服务完成

商户确认服务完成

任一方确认即可（MVP 阶段）

3️⃣ 排队状态计算逻辑
数据来源

当前时间之前未完成的预约

当前用户之前的预约数量

计算逻辑
前面排队人数 = 当前预约前、未完成的预约数

预计等待时间 =
前面排队人数 × 单人平均服务时长（分钟）

4️⃣ 用户端展示内容（卡片详情内）

当前预约人数

排队进度：

前面还有 X 人

预计等待 X 分钟

若商户不支持预约：

不展示该模块

5️⃣ 商户端功能

设置是否支持预约

设置单人平均服务时长

确认 / 取消预约

确认服务完成

七、数据模型设计（AI 生成代码核心）
User
- id
- phone
- nickname
- created_at

Merchant
- id
- name
- type
- support_appointment (bool)
- avg_service_minutes
- created_at

Card
- id
- user_id
- merchant_id
- card_type
- total_times
- remain_times
- used_times
- recharge_amount
- recharge_at
- last_used_at
- start_date
- end_date

Usage
- id
- card_id
- merchant_id
- used_times
- used_at

Notice
- id
- merchant_id
- title
- content
- created_at

Appointment
- id
- merchant_id
- user_id
- appointment_time
- status (pending / confirmed / finished / canceled)
- created_at

八、技术方案（AI 严格遵守）
后端（Go）

语言：Go

框架：Gin

ORM：GORM

数据库：MySQL

架构：RESTful API

鉴权：❌ 暂不实现

后端职责

卡片 / 使用记录 / 通知 CRUD

核销逻辑

动态核销码生成与校验

预约 & 排队进度计算

服务完成状态推进

前端（H5）
技术栈

Vue3 或 React

TailwindCSS

Axios

Router

UI 原则

移动端优先

信息清晰

状态明确

不做复杂动画

九、这一版设计的产品价值总结
✔ 真正解决「卡片黑盒」
✔ 不强迫商户适配预约
✔ 排队逻辑真实可信
✔ 非常适合 H5 MVP 快速上线
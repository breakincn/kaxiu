const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Login.B87pcvjy.js","assets/vendor.Da2sdW28.js","assets/index.DuRPLurf.js","assets/Register.iod0VM9f.js","assets/CardList.y-D6Heu_.js","assets/dateFormat.BMJ2_UIx.js","assets/browser.DZr5NsCX.js","assets/CardList.YGeYZn90.css","assets/CardDetail.BX3Q3CWh.js","assets/Settings.C3zUcJxZ.js","assets/BindPhone.sCjvpiv2.js","assets/BindPhone.BlDhBaas.css","assets/UserCode.CJ6N8Rzt.js","assets/Nickname.DUVsz8GC.js","assets/ScanShopPay.CoH0ICtE.js","assets/PwaInstallGuide.DykFy_Bj.js","assets/Shop.G8f55gwu.js","assets/Shop.lykLTe-7.css","assets/Login.BnOH7fwk.js","assets/Dashboard.C1nYVMr9.js","assets/Dashboard.DDFXyOaP.css","assets/Settings.DwAWVlrD.js","assets/BindPhone.B7lw1ZoG.js","assets/BindPhone.UfaSEgaJ.css","assets/Services.DH10BMpT.js","assets/MerchantInfo.CdkUCCWy.js","assets/IssueCard.DVKb1KIx.js","assets/ScanVerify.CeXpXu2w.js","assets/ScanCard.CarjdZqf.js","assets/CardDetail.CWwgEnaJ.js","assets/ShopManage.D1MsWsSQ.js","assets/ShopManage.vUVlJx1x.css","assets/CustomerService.DfCa2xOW.js","assets/RolePermissionAdjust.D2QJo3Ee.js","assets/Login.CdHOT2cJ.js","assets/Dashboard._EI7aJY_.js"])))=>i.map(i=>d[i]);
import{c as T,r as I,o as L,a as A,b as O,d as R}from"./vendor.Da2sdW28.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function n(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(t){if(t.ep)return;t.ep=!0;const o=n(t);fetch(t.href,o)}})();const D=(r,s)=>{const n=r.__vccOpts||r;for(const[c,t]of s)n[c]=t;return n},V={};function y(r,s){const n=I("router-view");return L(),T(n)}const S=D(V,[["render",y]]),k="modulepreload",b=function(r){return"/"+r},l={},e=function(s,n,c){let t=Promise.resolve();if(n&&n.length>0){let a=function(m){return Promise.all(m.map(p=>Promise.resolve(p).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),d=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));t=a(n.map(m=>{if(m=b(m),m in l)return;l[m]=!0;const p=m.endsWith(".css"),u=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${u}`))return;const _=document.createElement("link");if(_.rel=p?"stylesheet":k,p||(_.as="script"),_.crossOrigin="",_.href=m,d&&_.setAttribute("nonce",d),document.head.appendChild(_),p)return new Promise((v,P)=>{_.addEventListener("load",v),_.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(a){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a}return t.then(a=>{for(const i of a||[])i.status==="rejected"&&o(i.reason);return s().catch(o)})},f=typeof window<"u"?window.location.host:"",E=f==="kabao.shop"||f.endsWith(".kabao.shop"),M=[{path:"/",redirect:"/user/cards"},{path:"/login",name:"UserLogin",component:()=>e(()=>import("./Login.B87pcvjy.js"),__vite__mapDeps([0,1,2]))},{path:"/user/register",name:"UserRegister",component:()=>e(()=>import("./Register.iod0VM9f.js"),__vite__mapDeps([3,1,2]))},{path:"/user/cards",name:"UserCards",component:()=>e(()=>import("./CardList.y-D6Heu_.js"),__vite__mapDeps([4,1,2,5,6,7]))},{path:"/user/cards/:id",name:"CardDetail",component:()=>e(()=>import("./CardDetail.BX3Q3CWh.js"),__vite__mapDeps([8,1,2,5,6]))},{path:"/user/settings",name:"UserSettings",component:()=>e(()=>import("./Settings.C3zUcJxZ.js"),__vite__mapDeps([9,1]))},{path:"/user/bind-phone",name:"UserBindPhone",component:()=>e(()=>import("./BindPhone.sCjvpiv2.js"),__vite__mapDeps([10,1,2,11]))},{path:"/user/code",name:"UserCode",component:()=>e(()=>import("./UserCode.CJ6N8Rzt.js"),__vite__mapDeps([12,1,6,2]))},{path:"/user/nickname",name:"UserNickname",component:()=>e(()=>import("./Nickname.DUVsz8GC.js"),__vite__mapDeps([13,1]))},{path:"/user/scan-pay",name:"UserScanPay",component:()=>e(()=>import("./ScanShopPay.CoH0ICtE.js"),__vite__mapDeps([14,1,15]))},{path:"/s/:slug",name:"Shop",component:()=>e(()=>import("./Shop.G8f55gwu.js"),__vite__mapDeps([16,1,2,17]))},{path:"/s/id/:id",name:"ShopById",component:()=>e(()=>import("./Shop.G8f55gwu.js"),__vite__mapDeps([16,1,2,17]))}],w=[{path:"/",redirect:"/merchant"},{path:"/login",name:"MerchantLogin",component:()=>e(()=>import("./Login.BnOH7fwk.js"),__vite__mapDeps([18,1,2]))},{path:"/s/:slug/login",name:"TechnicianLogin",component:()=>e(()=>import("./Login.BnOH7fwk.js"),__vite__mapDeps([18,1,2]))},{path:"/s/:slug",beforeEnter:r=>{const s=!!localStorage.getItem("userToken"),n=!!localStorage.getItem("merchantToken"),c=!!localStorage.getItem("technicianToken");return s?!0:n||c?"/merchant":`/s/${r.params.slug}/login`},component:()=>e(()=>import("./Shop.G8f55gwu.js"),__vite__mapDeps([16,1,2,17]))},{path:"/s/id/:id",beforeEnter:r=>{const s=!!localStorage.getItem("userToken"),n=!!localStorage.getItem("merchantToken"),c=!!localStorage.getItem("technicianToken");return s?!0:n||c?"/merchant":"/login"},component:()=>e(()=>import("./Shop.G8f55gwu.js"),__vite__mapDeps([16,1,2,17]))},{path:"/merchant",name:"MerchantDashboard",component:()=>e(()=>import("./Dashboard.C1nYVMr9.js"),__vite__mapDeps([19,1,2,5,6,20]))},{path:"/merchant/settings",name:"MerchantSettings",component:()=>e(()=>import("./Settings.DwAWVlrD.js"),__vite__mapDeps([21,1,2]))},{path:"/merchant/bind-phone",name:"MerchantBindPhone",component:()=>e(()=>import("./BindPhone.B7lw1ZoG.js"),__vite__mapDeps([22,1,2,23]))},{path:"/merchant/services",name:"MerchantServices",component:()=>e(()=>import("./Services.DH10BMpT.js"),__vite__mapDeps([24,1,2]))},{path:"/merchant/merchant-info",name:"MerchantInfo",component:()=>e(()=>import("./MerchantInfo.CdkUCCWy.js"),__vite__mapDeps([25,1,2]))},{path:"/merchant/issue-card",name:"MerchantIssueCard",component:()=>e(()=>import("./IssueCard.DVKb1KIx.js"),__vite__mapDeps([26,1,2]))},{path:"/merchant/scan-verify",name:"MerchantScanVerify",component:()=>e(()=>import("./ScanVerify.CeXpXu2w.js"),__vite__mapDeps([27,1,15,2]))},{path:"/merchant/scan-card",name:"MerchantScanCard",component:()=>e(()=>import("./ScanCard.CarjdZqf.js"),__vite__mapDeps([28,1,15,2]))},{path:"/merchant/cards/:id",name:"MerchantCardDetail",component:()=>e(()=>import("./CardDetail.CWwgEnaJ.js"),__vite__mapDeps([29,1,2,5]))},{path:"/merchant/shop-manage",name:"MerchantShopManage",component:()=>e(()=>import("./ShopManage.D1MsWsSQ.js"),__vite__mapDeps([30,1,2,31]))},{path:"/merchant/customer-service",name:"MerchantCustomerService",component:()=>e(()=>import("./CustomerService.DfCa2xOW.js"),__vite__mapDeps([32,1,2]))},{path:"/merchant/role-permissions/:roleKey",name:"MerchantRolePermissionAdjust",component:()=>e(()=>import("./RolePermissionAdjust.D2QJo3Ee.js"),__vite__mapDeps([33,1,2]))},{path:"/platform-admin/login",name:"PlatformAdminLogin",component:()=>e(()=>import("./Login.CdHOT2cJ.js"),__vite__mapDeps([34,1,2]))},{path:"/platform-admin",name:"PlatformAdminDashboard",component:()=>e(()=>import("./Dashboard._EI7aJY_.js"),__vite__mapDeps([35,1,2]))}],U=E?w:M,h=A({history:O(),routes:U});h.beforeEach(r=>{if(r.path.startsWith("/platform-admin"))return!0;const n=r.path==="/login"||r.path==="/user/register"||r.path.startsWith("/s/"),c=r.path==="/login"||/^\/s\/[^/]+\/login$/.test(r.path);if(!E)return n||localStorage.getItem("userId")?!0:"/login";if(c)return!0;const t=!!localStorage.getItem("merchantToken"),o=!!localStorage.getItem("technicianToken");if(t||o)return!0;const a=r.path.match(/^\/s\/([^/]+)(?:\/.*)?$/);return a&&a[1]&&!r.path.endsWith("/login")?`/s/${a[1]}/login`:"/login"});const W=Object.freeze(Object.defineProperty({__proto__:null,default:h},Symbol.toStringTag,{value:"Module"})),g=R(S);g.use(h);g.mount("#app");"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").catch(()=>{})});export{D as _,e as a,W as i};

import{e as r,f as d,g as t,h as m,w as c,i as p,v as u,t as f,u as v,o as b}from"./vendor.Da2sdW28.js";import{v as g}from"./index.DuRPLurf.js";import"./index.BYIGvkoh.js";const x={class:"min-h-screen bg-gray-50 flex items-center justify-center px-4"},y={class:"w-full max-w-md"},_={class:"bg-white rounded-2xl p-6 shadow-lg"},w={class:"mb-6"},k=["disabled"],I={__name:"Login",setup(h){const i=v(),s=r(localStorage.getItem("platformAdminToken")||""),a=r(!1),n=async()=>{var o,e;if(s.value){a.value=!0;try{localStorage.setItem("platformAdminToken",s.value),await g.listServiceRoles(),i.replace("/platform-admin")}catch(l){localStorage.removeItem("platformAdminToken"),alert(((e=(o=l.response)==null?void 0:o.data)==null?void 0:e.error)||"Token 无效")}finally{a.value=!1}}};return(o,e)=>(b(),d("div",x,[t("div",y,[e[2]||(e[2]=m('<div class="text-center mb-8"><div class="flex items-center justify-center gap-2 mb-2"><span class="text-primary font-bold text-3xl">卡包</span><span class="text-gray-400 text-sm">平台后台</span></div><p class="text-gray-500">请输入平台管理员 Token</p></div>',1)),t("div",_,[t("form",{onSubmit:c(n,["prevent"])},[t("div",w,[e[1]||(e[1]=t("label",{class:"block text-gray-700 text-sm font-medium mb-2"},"PLATFORM_ADMIN_TOKEN",-1)),p(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>s.value=l),type:"password",placeholder:"请输入 Token",class:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:border-primary",required:""},null,512),[[u,s.value]])]),t("button",{type:"submit",disabled:a.value,class:"w-full py-3 bg-primary text-white rounded-lg font-medium disabled:opacity-50"},f(a.value?"验证中...":"进入平台后台"),9,k)],32)])])]))}};export{I as default};

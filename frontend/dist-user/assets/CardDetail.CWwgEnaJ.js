import{e as y,s as b,u as h,f as d,g as t,t as a,A as r,D as w,o as c}from"./vendor.Da2sdW28.js";import{r as k,k as j,c as C}from"./index.DuRPLurf.js";import{f as u,a as g}from"./dateFormat.BMJ2_UIx.js";import"./index.BYIGvkoh.js";const B={class:"min-h-screen bg-gray-50 pb-6"},D={class:"px-4 mt-4 space-y-4"},M={class:"bg-white rounded-2xl p-5 shadow-sm border border-gray-200"},A={key:0,class:"text-center text-gray-400 py-8"},N={key:1},R={class:"flex items-start justify-between"},S={class:"text-lg font-bold text-gray-800"},T={class:"text-gray-500 text-xs mt-1"},V={class:"bg-gray-100 px-3 py-1 rounded-full"},z={class:"text-xs font-medium text-gray-700"},E={class:"flex justify-between items-end mt-6"},I={class:"text-5xl font-bold leading-none text-gray-900"},O={class:"text-right"},q={class:"text-sm font-medium text-gray-800"},F={class:"bg-white rounded-2xl p-5 shadow-sm border border-gray-200"},G={class:"space-y-3.5"},H={class:"flex justify-between"},J={class:"text-gray-800"},K={class:"flex justify-between"},L={class:"text-gray-800"},P={class:"flex justify-between"},Q={class:"text-gray-800"},U={class:"flex justify-between"},W={class:"text-gray-800"},X={class:"flex justify-between"},Y={class:"text-gray-800"},Z={class:"flex justify-between"},$={class:"text-gray-800"},tt={class:"flex justify-between"},st={class:"text-gray-800"},lt={__name:"CardDetail",setup(et){const l=h(),p=w(),i=y(!1),e=y({}),v=()=>{l.back()},f=async()=>{var n,s;i.value=!0;try{const o=await C.getMerchantCard(p.params.id);e.value=o.data.data}catch(o){alert(((s=(n=o.response)==null?void 0:n.data)==null?void 0:s.error)||"获取卡片失败")}finally{i.value=!1}},m=()=>{l.push("/merchant/scan-verify")};return b(()=>{const n=k(),s=j();if(!n||!s){l.replace("/login");return}f()}),(n,s)=>{var o,x,_;return c(),d("div",B,[t("header",{class:"bg-white px-4 py-3 flex items-center justify-between border-b sticky top-0 z-10"},[t("button",{onClick:v,class:"p-1 text-gray-600"},[...s[0]||(s[0]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),s[1]||(s[1]=t("span",{class:"font-medium text-gray-800"},"卡片详情",-1)),s[2]||(s[2]=t("div",{class:"w-8"},null,-1))]),t("div",D,[t("div",M,[i.value?(c(),d("div",A," 加载中... ")):(c(),d("div",N,[t("div",R,[t("div",null,[t("div",S,a(((o=e.value.merchant)==null?void 0:o.name)||"商户"),1),t("div",T,a(e.value.card_type),1)]),t("div",V,[t("span",z,"NO: "+a(e.value.card_no||"-"),1)])]),t("div",E,[t("div",null,[s[3]||(s[3]=t("div",{class:"text-gray-500 text-xs mb-1"},"剩余次数",-1)),t("div",I,a(e.value.remain_times),1)]),t("div",O,[s[4]||(s[4]=t("div",{class:"text-gray-500 text-xs mb-1"},"有效期至",-1)),t("div",q,a(r(u)(e.value.end_date)),1)])])]))]),t("div",F,[t("div",G,[t("div",H,[s[5]||(s[5]=t("span",{class:"text-gray-500"},"用户",-1)),t("span",J,a(((x=e.value.user)==null?void 0:x.nickname)||((_=e.value.user)==null?void 0:_.phone)||e.value.user_id),1)]),t("div",K,[s[6]||(s[6]=t("span",{class:"text-gray-500"},"卡类型",-1)),t("span",L,a(e.value.card_type),1)]),t("div",P,[s[7]||(s[7]=t("span",{class:"text-gray-500"},"开卡/充值",-1)),t("span",Q,a(r(g)(e.value.recharge_at))+" / ¥"+a(e.value.recharge_amount||0),1)]),t("div",U,[s[8]||(s[8]=t("span",{class:"text-gray-500"},"总次数",-1)),t("span",W,a(e.value.total_times)+" 次",1)]),t("div",X,[s[9]||(s[9]=t("span",{class:"text-gray-500"},"已使用",-1)),t("span",Y,a(e.value.used_times)+" 次",1)]),t("div",Z,[s[10]||(s[10]=t("span",{class:"text-gray-500"},"上次使用",-1)),t("span",$,a(e.value.last_used_at?r(g)(e.value.last_used_at):"未使用"),1)]),t("div",tt,[s[11]||(s[11]=t("span",{class:"text-gray-500"},"有效期",-1)),t("span",st,a(r(u)(e.value.start_date))+" 至 "+a(r(u)(e.value.end_date)),1)])])]),t("div",{class:"bg-white rounded-xl p-4 shadow-sm"},[t("button",{onClick:m,class:"w-full py-3 bg-orange-500 text-white rounded-lg font-medium"}," 扫码核销 "),s[12]||(s[12]=t("p",{class:"text-gray-400 text-xs mt-3"}," 提示：请扫描用户端生成的核销二维码 ",-1))])])])}}};export{lt as default};
